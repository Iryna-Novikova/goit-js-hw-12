{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\nconst myApiKey = '50600244-46274b1c7bbfed49553e909c7';\nexport const perPage = 15;\n\nexport const getImagesByQuery = async (query, page) => {\n    // параметри запиту\n    const params = {\n        key: myApiKey,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n    };\n   \n    const response = await axios.get('/api/', { params })\n    return response.data;\n}\n","//імпортуємо з бібліотеки simplelightbox\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryListElem = document.querySelector('.gallery');\nconst loaderElm = document.querySelector('.loader');\nconst loadBtnElm = document.querySelector('.load-more-btn');\n\n//екземпляр SimpleLightbox для роботи з модальним вікном\nconst Lightbox = new SimpleLightbox('.gallery a', { \n    captionsData: 'alt',\n    captionDelay: 250,\n    captionPosition: 'bottom',\n  });\n\n// створення елементу розмітки для однієї картинки\nfunction getListElemMrkup(image) {\n    return `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${image.webformatURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${image.largeImageURL}\"\n        alt=\"${image.tags}\"\n      /> \n    <div class=\"img-info\">\n      <div class=\"img-info-descr\">\n         <h2 class=\"img-info-header\">likes</h2>\n         <p class=\"img-info-p\">${image.likes}</p>\n      </div>\n      <div class=\"img-info-descr\">\n         <h2 class=\"img-info-header\">views</h2>\n         <p class=\"img-info-p\">${image.views}</p>\n      </div>\n      <div class=\"img-info-descr\">\n         <h2 class=\"img-info-header\">comments</h2>\n         <p class=\"img-info-p\">${image.comments}</p>\n      </div>\n      <div class=\"img-info-descr\">\n         <h2 class=\"img-info-header\">downloads</h2>\n         <p class=\"img-info-p\">${image.downloads}</p>\n      </div>      \n      </div>          \n    </a>\n    </li>`; \n}\n\nexport function createGallery(images) { \n    const listImagesMrkup = images.map(getListElemMrkup).join('\\n');\n    galleryListElem.insertAdjacentHTML('beforeend', listImagesMrkup);\n    Lightbox.refresh();\n}\n\nexport function clearGallery() { \n    galleryListElem.innerHTML = '';\n}\n\nexport function showLoader() { \n    loaderElm.classList.remove('hidden');\n}\n\nexport function hideLoader() { \n    loaderElm.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() { \n  loadBtnElm.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() { \n  loadBtnElm.classList.add('hidden');\n}","// імпортуємо бібліотеку izitoast\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// // імпортуємо власні функції\nimport { getImagesByQuery, perPage } from './js/pixabay-api';\nimport {\n    createGallery, clearGallery, showLoader, hideLoader,\n    showLoadMoreButton, hideLoadMoreButton\n} from './js/render-functions.js';\n\nconst formElm = document.querySelector('.form');\nconst loadBtnElm = document.querySelector('.load-more-btn');\n\nlet page = 0;\nlet maxPage = 0;\nlet query = '';\nlet message;\n\nformElm.addEventListener('submit', handlerFormSbmt); \n\n// опрацювання сабміту форми\nasync function handlerFormSbmt(evt) { \n    evt.preventDefault();\n    clearGallery();\n    hideLoadMoreButton();\n\n    query = formElm.elements['search-text'].value.trim();\n\n    if (query !== '') {\n        showLoader();\n        page = 1;\n        try {\n            const res = await getImagesByQuery(query, page);\n\n            if (res.hits.length === 0) {\n                message = '❌ Sorry, there are no images matching your search query. Please try again!';\n                showAlert('topRight');           \n            } else {              \n                createGallery(res.hits);\n                formElm.reset();\n            };\n\n            maxPage = Math.ceil(res.totalHits / perPage);\n            if (page < maxPage) {\n                showLoadMoreButton();\n                loadBtnElm.addEventListener('click', handlerLoadBtnOnClick);\n            };               \n        }\n        catch {\n            err => {\n                message = `❌ Sorry, it's some error hear: ${err}`;\n                showAlert('topRight');\n            };\n        };\n                   \n        hideLoader();\n    }\n    else { \n        message = '❌ Please enter non empty request.';\n        showAlert('topRight');    \n    };\n}\n\nasync function handlerLoadBtnOnClick(evt) {\n    page += 1; \n    showLoader();   \n    try { \n        const res = await getImagesByQuery(query, page);\n        createGallery(res.hits);\n    }\n    catch {\n        err => {\n            message = `❌ Sorry, it's some error hear: ${err}`;\n            showAlert('topRight');\n        };\n    };\n\n    hideLoader();\n\n    if (page === maxPage) {\n        hideLoadMoreButton();\n        loadBtnElm.removeEventListener('click', handlerLoadBtnOnClick);\n        message = \"We're sorry, but you've reached the end of search results.\";\n        setTimeout(showAlert('bottomCenter'), 1000);\n    };\n}\n\n// функція відображення повідомлення\nfunction showAlert(pos) {\n    iziToast.show({\n        title: '',\n        message: message,\n        backgroundColor: 'rgb(136, 44, 44)',\n        messageColor: 'rgb(255, 255, 255)',\n        position: pos,\n    });\n }\n\n// скролінг\nfunction scroll() {\n    const galleryItemElm = document.querySelector('.gallery-item');\n    const height = galleryItemElm.getBoundingClientRect().height;\n    console.log(`height: ${height}`);\n}\n\n "],"names":["axios","myApiKey","perPage","getImagesByQuery","query","page","params","galleryListElem","loaderElm","loadBtnElm","Lightbox","SimpleLightbox","getListElemMrkup","image","createGallery","images","listImagesMrkup","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","formElm","maxPage","message","handlerFormSbmt","evt","res","showAlert","handlerLoadBtnOnClick","pos","iziToast"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,sBACzB,MAAMC,EAAW,qCACJC,EAAU,GAEVC,EAAmB,MAAOC,EAAOC,IAAS,CAEnD,MAAMC,EAAS,CACX,IAAKL,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUH,CAClB,EAGI,OADiB,MAAMF,EAAM,IAAI,QAAS,CAAE,OAAAM,EAAQ,GACpC,IACpB,EChBMC,EAAkB,SAAS,cAAc,UAAU,EACnDC,EAAY,SAAS,cAAc,SAAS,EAC5CC,EAAa,SAAS,cAAc,gBAAgB,EAGpDC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,IACd,gBAAiB,QACrB,CAAG,EAGH,SAASC,EAAiBC,EAAO,CAC7B,MAAO;AAAA,oCACyBA,EAAM,YAAY;AAAA;AAAA;AAAA,eAGvCA,EAAM,aAAa;AAAA,eACnBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,iCAKQA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,iCAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,iCAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,iCAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,UAKhD,CAEO,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAAkBD,EAAO,IAAIH,CAAgB,EAAE,KAAK;AAAA,CAAI,EAC9DL,EAAgB,mBAAmB,YAAaS,CAAe,EAC/DN,EAAS,QAAO,CACpB,CAEO,SAASO,GAAe,CAC3BV,EAAgB,UAAY,EAChC,CAEO,SAASW,GAAa,CACzBV,EAAU,UAAU,OAAO,QAAQ,CACvC,CAEO,SAASW,GAAa,CACzBX,EAAU,UAAU,IAAI,QAAQ,CACpC,CAEO,SAASY,GAAqB,CACnCX,EAAW,UAAU,OAAO,QAAQ,CACtC,CAEO,SAASY,GAAqB,CACnCZ,EAAW,UAAU,IAAI,QAAQ,CACnC,CC1DA,MAAMa,EAAU,SAAS,cAAc,OAAO,EACxCb,EAAa,SAAS,cAAc,gBAAgB,EAE1D,IAAIJ,EAAO,EACPkB,EAAU,EACVnB,EAAQ,GACRoB,EAEJF,EAAQ,iBAAiB,SAAUG,CAAe,EAGlD,eAAeA,EAAgBC,EAAK,CAOhC,GANAA,EAAI,eAAc,EAClBT,IACAI,IAEAjB,EAAQkB,EAAQ,SAAS,aAAa,EAAE,MAAM,OAE1ClB,IAAU,GAAI,CACdc,IACAb,EAAO,EACP,GAAI,CACA,MAAMsB,EAAM,MAAMxB,EAAiBC,EAAOC,CAAI,EAE1CsB,EAAI,KAAK,SAAW,GACpBH,EAAU,6EACVI,EAAU,UAAU,IAEpBd,EAAca,EAAI,IAAI,EACtBL,EAAQ,MAAK,GAGjBC,EAAU,KAAK,KAAKI,EAAI,UAAYzB,CAAO,EACvCG,EAAOkB,IACPH,IACAX,EAAW,iBAAiB,QAASoB,CAAqB,EAEjE,MACK,CAMd,CACQV,GACH,MAEGK,EAAU,oCACVI,EAAU,UAAU,CAE5B,CAEA,eAAeC,EAAsBH,EAAK,CACtCrB,GAAQ,EACRa,IACA,GAAI,CACA,MAAMS,EAAM,MAAMxB,EAAiBC,EAAOC,CAAI,EAC9CS,EAAca,EAAI,IAAI,CACzB,MACK,CAMV,CACIR,IAEId,IAASkB,IACTF,IACAZ,EAAW,oBAAoB,QAASoB,CAAqB,EAC7DL,EAAU,6DACV,WAAWI,EAAU,cAAc,EAAG,GAAI,EAElD,CAGA,SAASA,EAAUE,EAAK,CACpBC,EAAS,KAAK,CACV,MAAO,GACP,QAASP,EACT,gBAAiB,mBACjB,aAAc,qBACd,SAAUM,CAClB,CAAK,CACL"}